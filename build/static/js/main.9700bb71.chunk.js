(this.webpackJsonppuhelinluettolo=this.webpackJsonppuhelinluettolo||[]).push([[0],{22:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r=n(17),s=n.n(r),c=(n(22),n(3)),o=n(8),u=n(2),a=n(4),i=n.n(a),l="api/persons",j={getAll:function(){return i.a.get(l).then((function(e){return e.data}))},create:function(e){return i.a.post(l,e).then((function(e){return e.data}))},remove:function(e){return i.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},update:function(e,t){var n=i.a.put("".concat(l,"/").concat(e),t);return console.log(t),n.then((function(e){return e.data}))}},d=n(0),b=function(e){var t=e.message;return null===t?null:Object(d.jsx)("div",{className:"error",children:t})},f=function(e){var t=e.person,n=e.setPersons,r=e.persons,s=e.setErrorMessage;return Object(d.jsxs)("div",{children:[t.name," ",t.number,Object(d.jsx)("button",{onClick:function(){window.confirm("Delete ".concat(t.name,"?"))&&(j.remove(t.id),n(r.filter((function(e){return e.id!==t.id})))),s("Removed ".concat(t.name)),setTimeout((function(){s(null)}),5e3)},children:"Delete"})]})},m=function(e){var t=e.filter,n=e.persons,r=e.setPersons,s=e.setErrorMessage,c=n.filter((function(e){return e.name.toUpperCase().includes(t.toUpperCase())})),o=""===t?n:c;return Object(d.jsx)("div",{children:o.map((function(e){return Object(d.jsx)(f,{person:e,setPersons:r,persons:n,setErrorMessage:s},e.name)}))})},h=function(e){var t=e.persons,n=e.newName,r=e.setNewName,s=e.newNumber,c=e.setNewNumber,u=e.setPersons,a=e.setErrorMessage;return Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault();var i={name:n,number:s},l=t.map((function(e){return e.name}));if(!1===l.includes(n))j.create(i).then((function(e){u(t.concat(e))})).catch((function(e){a(e.response.data.error)})),a("Added ".concat(n)),setTimeout((function(){a(null)}),5e3);else if(window.confirm("".concat(n," is already added to phonebook, replace the old number with a new one?"))){var d=l.indexOf(n)+1,b=t.find((function(e){return d===e.id})),f=Object(o.a)(Object(o.a)({},b),{},{number:s});j.update(d,f).then((function(e){u(t.map((function(t){return t.id!==d?t:e})))})),a("Changed ".concat(n,"'s number'")),setTimeout((function(){a(null)}),5e3)}r(""),c("")},children:[Object(d.jsxs)("div",{children:["name: ",Object(d.jsx)("input",{value:n,onChange:function(e){r(e.target.value)}})]}),Object(d.jsxs)("div",{children:["number: ",Object(d.jsx)("input",{value:s,onChange:function(e){c(e.target.value)}})]}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{type:"submit",children:"add"})})]})},p=function(e){var t=e.filter,n=e.setFilter;return Object(d.jsxs)("div",{children:["filter shown with ",Object(d.jsx)("input",{value:t,onChange:function(e){n(e.target.value)}})]})},O=function(){var e=Object(u.useState)([]),t=Object(c.a)(e,2),n=t[0],r=t[1],s=Object(u.useState)(""),o=Object(c.a)(s,2),a=o[0],i=o[1],l=Object(u.useState)(""),f=Object(c.a)(l,2),O=f[0],v=f[1],x=Object(u.useState)(""),g=Object(c.a)(x,2),w=g[0],N=g[1],E=Object(u.useState)(null),C=Object(c.a)(E,2),P=C[0],M=C[1];return Object(u.useEffect)((function(){j.getAll().then((function(e){r(e)}))}),[]),Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Phonebook"}),Object(d.jsx)(b,{message:P}),Object(d.jsx)(p,{persons:n,setFilter:N,filter:w}),Object(d.jsx)("h2",{children:"add a new"}),Object(d.jsx)(h,{setErrorMessage:M,persons:n,newName:a,setNewName:i,newNumber:O,setNewNumber:v,setPersons:r}),Object(d.jsx)("h2",{children:"Numbers"}),Object(d.jsx)(m,{persons:n,filter:w,setPersons:r,setErrorMessage:M})]})};s.a.render(Object(d.jsx)(O,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.9700bb71.chunk.js.map